<template>

<div id = "title">
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN"
 "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg"
 width="300.000000pt" height="83.000000pt" viewBox="0 0 300.000000 83.000000"
 preserveAspectRatio="xMidYMid meet">
<metadata>
Created by potrace 1.10, written by Peter Selinger 2001-2011
</metadata>
<g transform="translate(0.000000,83.000000) scale(0.100000,-0.100000)"
fill="#000000" stroke="none">
<path d="M339 745 c-15 -8 -33 -29 -42 -47 -17 -37 -207 -526 -207 -533 0 -3
26 -5 58 -5 l57 0 29 83 c16 45 43 116 61 157 18 41 40 100 50 130 9 30 21 59
25 63 4 4 17 -23 30 -60 12 -37 31 -84 41 -104 l18 -37 -66 -4 c-57 -4 -69 -8
-89 -32 -31 -36 -32 -85 -1 -114 27 -25 37 -28 37 -8 0 24 23 34 90 38 l65 3
22 -55 22 -55 61 -3 61 -3 -16 38 c-24 56 -195 503 -209 546 -7 21 -59 23 -97
2z m152 -265 c48 -124 90 -235 94 -247 11 -38 -12 -26 -37 18 -37 67 -97 85
-183 54 -21 -8 -41 -12 -44 -9 -13 12 19 40 55 47 110 23 121 37 93 117 -28
78 -61 142 -81 154 -30 18 -63 -27 -108 -147 -60 -159 -102 -257 -112 -257
-14 0 -9 22 27 115 142 374 150 389 189 383 17 -2 36 -43 107 -228z"/>
<path d="M777 743 c-15 -10 -30 -27 -32 -38 -3 -11 -6 -139 -7 -284 l-3 -263
145 4 c166 5 197 15 251 75 107 118 104 337 -5 444 -55 54 -111 73 -221 76
-82 3 -105 0 -128 -14z m251 -49 c82 -34 130 -108 139 -213 7 -85 -15 -158
-64 -212 -44 -49 -75 -58 -208 -61 l-110 -3 -3 239 c-2 167 1 243 9 252 17 20
188 19 237 -2z"/>
<path d="M832 657 c-21 -22 -22 -32 -22 -206 l0 -182 27 -25 c24 -23 34 -25
88 -21 74 5 128 29 161 73 29 38 54 112 54 160 0 81 -55 175 -122 210 -16 8
-56 14 -96 14 -59 0 -72 -3 -90 -23z m185 -37 c106 -64 108 -257 3 -331 -17
-12 -48 -19 -98 -21 l-73 -3 -2 188 -2 187 70 0 c52 0 78 -5 102 -20z"/>
<path d="M1344 746 c-17 -8 -34 -21 -37 -30 -4 -9 -7 -138 -7 -287 l-1 -271
55 -1 56 -2 -1 150 c0 82 -3 168 -7 190 -13 73 -27 17 -32 -134 -4 -103 -9
-146 -17 -149 -10 -3 -13 49 -13 236 0 258 2 267 52 260 20 -3 30 -23 78 -165
61 -180 82 -223 110 -223 31 0 58 47 95 164 20 61 45 137 57 169 21 57 21 58
57 55 l36 -3 3 -247 c2 -211 0 -248 -12 -248 -12 0 -15 27 -18 149 -3 128 -6
152 -21 169 -39 43 -62 6 -127 -196 -24 -72 -48 -132 -53 -132 -26 0 -49 42
-88 157 -28 84 -51 136 -70 157 l-28 31 9 -30 c83 -273 93 -300 125 -332 26
-26 41 -33 72 -33 48 0 56 6 42 32 -10 18 13 105 91 338 5 15 9 -52 9 -170 l1
-195 55 1 56 1 0 299 0 299 -73 3 -74 3 -69 -211 c-38 -115 -72 -210 -77 -210
-4 0 -8 6 -8 13 0 6 -28 101 -62 209 l-63 198 -35 -1 c-19 0 -49 -6 -66 -13z"/>
<path d="M2011 746 c-48 -26 -50 -43 -51 -323 l0 -263 60 0 60 0 0 300 0 300
-22 0 c-13 -1 -34 -7 -47 -14z m19 -296 c0 -153 -4 -240 -10 -240 -6 0 -10 84
-10 233 0 206 3 247 17 247 2 0 3 -108 3 -240z"/>
<path d="M2199 731 l-29 -29 0 -271 0 -271 56 0 55 0 -3 195 c-2 107 0 194 4
193 6 -3 72 -103 207 -315 l46 -73 58 0 57 0 0 300 0 300 -62 0 -61 0 6 -200
c3 -110 2 -200 -1 -200 -4 0 -16 18 -27 39 -11 21 -67 111 -125 200 -116 178
-127 186 -181 132z m171 -191 c116 -177 148 -212 175 -190 26 21 35 81 35 223
0 84 4 137 10 137 13 0 14 -497 1 -504 -21 -14 -45 14 -151 175 -117 179 -146
207 -178 175 -14 -14 -18 -43 -22 -176 -8 -245 -25 -207 -28 63 -2 227 2 267
32 267 7 0 64 -77 126 -170z"/>
</g>
</svg>
</div>

    <p class = "text-gray-100 italic mt-8 descr">To edit, add or delete projects on this page</p>
    <div v-if = "!this.$adminProps.admin" class = "py-20 admin">
        <input type = "password" v-model = "password_input" v-on:keyup.enter = "submit" class = "w-60 h-12 text-xl">
        <button @click = "submit" class = "py-4 mx-4 transition-all text-gray-100 hover:text-green-200
            duration-300 bg-gray-700 bg-opacity-25 hover:bg-opacity-65 hover:bg-gray-600 px-4">Submit</button>
        <p class = "text-red-400 font-bold" ref = "incorrect" style = "visibility: hidden">Incorrect Password</p>
    </div>
    <div class = "admin" v-if = "this.$adminProps.admin">
        <h1 v-if = "this.$adminProps.admin" class = "text-gray-100 py-8">You are already logged in as admin</h1>
        <button @click = "logout" v-if = "this.$adminProps.admin" class = "py-4 transition-all text-gray-100 hover:text-green-200
        duration-300 bg-gray-700 bg-opacity-25 hover:bg-opacity-65 hover:bg-gray-600 mx-4 px-4">Log out</button>
    </div>
</template>

<style scoped>

.descr {
    width: 100%;
    margin: auto;
    text-align: center;
    padding-top: 10px;
}

.admin {
    display: flex;
    justify-content: center;
    align-items: center;
}

#title {
    background-color: rgb(20, 30, 45);
    margin: auto;
    width: 100%;
    padding-bottom: 20px;
    border-bottom: 10px solid rgb(15, 15, 15); 
    border-radius: 10px;

}
svg {
    transform: scale(0.5);
    margin: auto;
    width: 100%;
}

svg {
    transform: scale(0.75);
    background-color: rgb(20, 30, 45);
    margin: auto;
    width: 100%;
}
path {
    fill: none;
    animation: draw 2s linear forwards;
}
 
@keyframes draw{
    from {
        stroke-dashoffset: 10000;
        stroke-dasharray: 10000;
        stroke: white;
        stroke-width: 5;
    }
    75% {
        stroke-dashoffset: 0;
        stroke: white;
        stroke-width: 5;
        fill: rgb(20, 30, 45);
    }
    100% {
        stroke-dashoffset: 0;
        stroke: lightgreen;
        stroke-width: 12;
        fill: rgb(12, 11, 27);
    }
    
}
</style>



<script>
export default {
    data(){
        return {"password_input" : "", "password" : ""}
    },
    mounted(){
        fetch(this.$api_info.link + "/password").then((res) => {
            if(!res.ok){
                console.log("Error")
            }
            else{return res.json()}
        }).then(data => {
            this.password = data.password
        })
    },
    methods : {
        submit(){
            if(this.password_input == this.password){
                this.$adminProps.changeAdmin()
                this.$router.push("/projects")
            }
            else{
                this.$refs.incorrect.style.visibility = "visible"
            }
        },
        logout(){
            this.$adminProps.changeAdmin()
            this.$router.push("/projects")
        }
    }
}
</script>